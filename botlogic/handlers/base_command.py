from aiogram.types import Message
from aiogram.fsm.context import FSMContext
from aiogram.types import (
    KeyboardButton,
    Message,
    ReplyKeyboardMarkup,
    ReplyKeyboardRemove,
)

from botlogic.handlers.database_command import identification_user
from botlogic.components import keyboard

town_translate = {'–º–æ—Å–∫–≤–∞': 'moskva', 'moskva': '–º–æ—Å–∫–≤–∞', '—Å–∞–Ω–∫—Ç-–ø–µ—Ç–µ—Ä–±—É—Ä–≥': 'sankt-peterburg', 'sankt-peterburg': '—Å–∞–Ω–∫—Ç-–ø–µ—Ç–µ—Ä–±—É—Ä–≥', '–µ–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥': 'ekaterinburg', 'ekaterinburg': '–µ–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', '–∫—Ä–∞—Å–Ω–æ–¥–∞—Ä': 'krasnodar', 'krasnodar': '–∫—Ä–∞—Å–Ω–æ–¥–∞—Ä'}



async def command_start_handler(message: Message, state: FSMContext) -> None:
    await identification_user(message=message, state=state)

    user_info = await state.get_data()
    await message.answer(
        f'''<b>–ß—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å —ç—Ç–æ—Ç –±–æ—Ç?</b>\n–ë–æ—Ç FindPL —É–≤–µ–¥–æ–º–ª—è–µ—Ç –æ–±–æ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö –Ω–∞ –ø–ª–æ—â–∞–¥–∫–µ –ê–≤–∏—Ç–æ –æ —Å–Ω—è—Ç–∏–∏ –∫–≤–∞—Ä—Ç–∏—Ä –≤ –≥–æ—Ä–æ–¥–∞—Ö  –ú–æ—Å–∫–≤–∞, –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥, –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä.\n–í–∞–º –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –¥–æ <code>{user_info['sub_end']}</code>''',
        reply_markup=keyboard
    )
    

async def get_info_handler(message: Message, state: FSMContext) -> None:
    await identification_user(message=message, state=state)
    
    user_info = await state.get_data()
    user_info_text = f'''‚ÑπÔ∏è –ü—Ä–æ—Ñ–∏–ª—å\n- - - - - - - - - - - - - - - - - - - - - - - -\n\nüïë –ü–æ–¥–ø–∏—Å–∫–∞ –¥–æ <code>{user_info['sub_end']}</code>\nüåÜ–ì–æ—Ä–æ–¥ –ø–æ–∏—Å–∫–∞: <code>{town_translate[user_info['town_search']].capitalize()}</code>\nüîë ID: <code>{user_info['tg_id']}</code>\n‚ñ´Ô∏è Username: <code>{user_info['username']}</code>\n\n- - - - - - - - - - - - - - - - - - - - - - - -'''
    await message.answer(user_info_text, reply_markup=keyboard)
    

async def support_handler(message: Message, state: FSMContext) -> None:
    await message.answer(
        '''
–û –Ω–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ:
1. –° –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –¥–æ–∑–≤–∞–Ω–∏–≤–∞—Ç—å—Å—è –¥–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤, –±–ª–∞–≥–æ–¥–∞—Ä—è —á–µ–º—É –≤—ã —Å–º–æ–∂–µ—Ç–µ –±—ã—Ç—å –ø–µ—Ä–≤—ã–º –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä.

2. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∏—ç–ª—Ç–æ—Ä—ã —Ç–æ–∂–µ –¥–æ–∑–≤–∞–Ω–∏–≤–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏ —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –¥–∞–ª–µ–µ –≤—ã—Å—Ç–∞–≤–ª—è—é—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã —É–∂–µ —Å –∫–æ–º–∏—Å—Å–∏–µ–π. –ù–∞—à –±–æ—Ç –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –±—ã—Ç—å –±—ã—Å—Ç—Ä–µ–µ.

–¶–µ–Ω–∞ —É—Å–ª—É–≥:
–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –Ω–∞—à —Å–µ—Ä–≤–∏—Å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 1300‚ÇΩ –≤ –º–µ—Å—è—Ü.

–ü—Ä–∞–≤–∏–ª–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∏ —Å—Ä–æ–∫–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞:
1. –ü–æ–¥–ø–∏—Å–∫–∞ –æ—Ñ–æ—Ä–º–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞.
2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏.
3. –ü–æ–¥–ø–∏—Å–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –¥–Ω–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ –æ–ø–ª–∞—Ç—ã.

–£—Å–ª–æ–≤–∏—è –æ–ø–ª–∞—Ç—ã:
–û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å Robokassa, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–í–æ–∑–≤—Ä–∞—Ç –∏ –æ—Ç–∫–∞–∑ –æ—Ç –ø–æ–∫—É–ø–∫–∏:
–í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –≤ —Å–ª—É—á–∞–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –ø–æ–≤–ª–µ–∫—à–µ–π –Ω–µ–ø–æ–ª—É—á–µ–Ω–∏–µ —É—Å–ª—É–≥. –î–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.

–°–∞–º–æ–∑–∞–Ω—è—Ç—ã–π: –ì–æ—Ä–ª–æ–≤ –î–µ–Ω–∏—Å –Æ—Ä—å–µ–≤–∏—á  
–ò–ù–ù: 744843123600

–ü–æ–ª–∏—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
–ú—ã —Å–æ–±–ª—é–¥–∞–µ–º –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –æ –∑–∞—â–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥ –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º.

–ü–æ–¥–¥–µ—Ä–∂–∫–∞: @s1cptn
        ''',
        reply_markup=keyboard
    )
